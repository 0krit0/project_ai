


<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<title>CarDamage AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== THEME ===== */
:root{
  --bg-main:#0b0f19;
  --bg-card:rgba(20,25,45,0.9);
  --neon:#22d3ee;
  --primary:#3b82f6;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --danger:#ef4444;
  --warning:#facc15;
  --success:#22c55e;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:radial-gradient(circle at top,#0f172a,#020617);
  color:var(--text);
}

/* ===== LAYOUT ===== */
.app{
  display:flex;
  min-height:100vh;
}

/* ===== SIDEBAR ===== */
.sidebar{
  width:240px;
  background:linear-gradient(180deg,#020617,#020617);
  border-right:1px solid rgba(34,211,238,0.25);
  padding:22px;
}

.sidebar h2{
  margin-top:0;
  color:var(--neon);
  text-shadow:0 0 10px rgba(34,211,238,0.7);
}

.sidebar p{
  color:var(--muted);
  margin-bottom:20px;
}

.sidebar a{
  display:block;
  padding:10px 14px;
  margin:8px 0;
  border-radius:10px;
  color:var(--text);
  text-decoration:none;
  transition:0.15s;
}

.sidebar a:hover{
  background:rgba(34,211,238,0.15);
  box-shadow:0 0 12px rgba(34,211,238,0.3);
}

/* ===== MAIN ===== */
.main{
  flex:1;
  padding:28px;
}

/* ===== CARD ===== */
.card{
  background:var(--bg-card);
  border-radius:16px;
  padding:22px;
  margin-bottom:22px;
  box-shadow:0 0 30px rgba(0,0,0,0.5);
  border:1px solid rgba(34,211,238,0.15);
}

.card h3{
  margin-top:0;
  color:var(--neon);
}

/* ===== FORM ===== */
label{color:var(--muted)}
select,input[type=file],textarea{
  width:100%;
  background:#020617;
  color:var(--text);
  border:1px solid rgba(34,211,238,0.3);
  border-radius:10px;
  padding:10px;
  margin:8px 0 14px;
}

textarea{resize:none}

/* ===== GAME BUTTON ===== */
.btn-game{
  background:linear-gradient(135deg,var(--neon),var(--primary));
  color:#020617;
  font-weight:bold;
  border:none;
  padding:12px 22px;
  border-radius:14px;
  cursor:pointer;
  box-shadow:0 0 18px rgba(34,211,238,0.6);
  transition:all .15s;
}

.btn-game:hover{
  transform:translateY(-2px);
  box-shadow:0 0 28px rgba(34,211,238,0.9);
}

.btn-game:active{
  transform:translateY(2px) scale(.97);
  box-shadow:0 0 8px rgba(34,211,238,0.4);
}

/* ===== BADGE ===== */
.badge{
  padding:6px 14px;
  border-radius:999px;
  font-weight:bold;
}

.low{background:var(--success)}
.medium{background:var(--warning);color:#000}
.high{background:var(--danger)}

/* ===== MOBILE ===== */
@media(max-width:768px){
  .app{flex-direction:column}
  .sidebar{width:100%}
}
</style>
</head>

<body>

{% if not session.get("user") %}
<div style="text-align:center;padding:60px">
  <h2 style="color:var(--neon)">CarDamage AI</h2>
  <p class="muted">‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏î‡πâ‡∏ß‡∏¢ AI</p>
  <a href="/login"><button class="btn-game">üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button></a>
</div>

{% else %}
<div class="app">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <h2>CarDamage AI</h2>
    <p>üëã {{ session.user.name }}</p>
    <a href="/">üîç ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏ñ</a>
    <a href="/history">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</a>
    <a href="/profile">üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
    <a href="/logout">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
  </div>

  <!-- MAIN -->
  <div class="main">

    <!-- ANALYZE -->
    <div class="card">
      <h3>üì∑ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</h3>
      <form method="post" enctype="multipart/form-data">
        <label>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</label>
        <select name="part">
          <option>‡∏Å‡∏±‡∏ô‡∏ä‡∏ô‡∏´‡∏ô‡πâ‡∏≤</option>
          <option>‡∏Å‡∏±‡∏ô‡∏ä‡∏ô‡∏´‡∏•‡∏±‡∏á</option>
          <option>‡∏õ‡∏£‡∏∞‡∏ï‡∏π</option>
          <option>‡∏ù‡∏≤‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á‡∏´‡∏ô‡πâ‡∏≤</option>
          <option>‡πÅ‡∏Å‡πâ‡∏°‡∏Ç‡πâ‡∏≤‡∏á‡∏£‡∏ñ</option>
          <option>‡πÑ‡∏ü‡∏´‡∏ô‡πâ‡∏≤</option>
          <option>‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏£‡∏ñ</option>
        </select>

        <label>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ</label>
        <input type="file" name="file" required>

        <button class="btn-game" type="submit">‚ö° ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
      </form>
    </div>

    {% if result %}
    <!-- RESULT -->
    <div class="card">
      <h3>üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h3>

      <p><b>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢:</b>
        <span class="badge {{ result }}">{{ result }}</span>
      </p>

      <p><b>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à:</b> {{ confidence }}%</p>
      <p><b>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</b> {{ decision }}</p>

      <ul>
        <li>{{ detail.description }}</li>
        <li>{{ detail.repair }}</li>
      </ul>

      <hr style="border-color:rgba(255,255,255,0.1)">

      <!-- FEEDBACK -->
      <h3>üó£Ô∏è Feedback</h3>
      <form method="post" action="/feedback">
        <input type="hidden" name="image_path" value="{{ image_path }}">
        <input type="hidden" name="result" value="{{ result }}">
        <input type="hidden" name="confidence" value="{{ confidence }}">

        <label>
          <input type="radio" name="is_correct" value="yes" required> ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        </label>
        <label>
          <input type="radio" name="is_correct" value="no"> ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        </label>

        <textarea name="comment" placeholder="‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"></textarea>
        <button class="btn-game" type="submit">üöÄ ‡∏™‡πà‡∏á Feedback</button>
      </form>
    </div>
    {% endif %}

  </div>
</div>
{% endif %}

<script>
const sound = document.getElementById("btnSound");

document.querySelectorAll(".btn-game").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    if(sound){
      sound.currentTime = 0;
      sound.volume = 0.4;
      sound.play();
    }

    // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏ö‡∏≤ ‡πÜ
    btn.animate([
      { transform: "scale(1)" },
      { transform: "scale(0.96)" },
      { transform: "scale(1)" }
    ], {
      duration: 120,
      easing: "ease-out"
    });
  });
});
</script>

</body>
<audio id="btnSound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-game-click-1114.mp3" type="audio/mpeg">
</audio>

</html>
"""